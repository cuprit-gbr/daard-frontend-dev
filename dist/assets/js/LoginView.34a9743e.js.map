{"version":3,"sources":["webpack:///./src/views/LoginView.vue?3ece","webpack:///./src/views/LoginView.vue?6624","webpack:///src/views/LoginView.vue","webpack:///./src/views/LoginView.vue?f026","webpack:///./src/views/LoginView.vue?89c6"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","isContentReady","staticStyle","_v","registerUrl","slot","loginUrl","staticRenderFns","component"],"mappings":"6GAAA,yBAAkhB,EAAG,G,oECArhB,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,eAAe,CAACE,YAAY,oCAAoCC,MAAM,CAAC,eAAiBP,EAAIQ,iBAAiB,CAACJ,EAAG,MAAM,CAACE,YAAY,gCAAgC,CAACF,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,kBAAkB,CAACG,MAAM,CAAC,MAAQ,WAAWH,EAAG,iBAAiB,CAACA,EAAG,MAAM,CAACE,YAAY,WAAWG,YAAY,CAAC,cAAc,YAAY,CAACL,EAAG,IAAI,CAACJ,EAAIU,GAAG,yFAAyFN,EAAG,IAAI,CAACG,MAAM,CAAC,KAAO,kCAAkC,CAACP,EAAIU,GAAG,qCAAqCN,EAAG,IAAI,CAACJ,EAAIU,GAAG,iFAAiFN,EAAG,iBAAiB,CAACA,EAAG,MAAM,CAACK,YAAY,CAAC,cAAc,UAAU,QAAU,OAAO,kBAAkB,aAAa,CAACL,EAAG,MAAM,CAACA,EAAG,MAAMA,EAAG,aAAa,CAACE,YAAY,kCAAkCC,MAAM,CAAC,IAAM,IAAI,KAAOP,EAAIW,YAAY,YAAa,EAAK,YAAa,IAAQ,CAACP,EAAG,WAAW,CAACQ,KAAK,WAAWR,EAAG,WAAW,CAACQ,KAAK,WAAW,CAACZ,EAAIU,GAAG,eAAe,GAAGN,EAAG,aAAa,CAACE,YAAY,kCAAkCC,MAAM,CAAC,IAAM,IAAI,KAAOP,EAAIa,SAAS,YAAa,EAAM,YAAa,IAAQ,CAACT,EAAG,WAAW,CAACQ,KAAK,WAAWR,EAAG,WAAW,CAACQ,KAAK,WAAW,CAACZ,EAAIU,GAAG,WAAWN,EAAG,WAAW,CAACQ,KAAK,SAAS,CAACR,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,kBAAkB,IAAI,GAAGH,EAAG,MAAMA,EAAG,OAAO,QAAQ,QACn6CU,EAAkB,G,uxBCsFtB,OACA,iBACA,YACA,oBACA,uBACA,sBACA,kBACA,eAEA,gBACA,cACA,SACA,KAZA,WAaA,OACA,kBACM,WAAN,IAGA,OACA,yBACA,sBACA,0BAEA,aACA,UAGA,cACA,IADA,WAEA,gCAEA,WAJA,WAKA,SAIA,WAEA,gBACA,aACA,eACA,iBAdA,IAgBA,yBAhBA,WAiBA,sBAEA,iDAEA,YArBA,WAsBA,oCACA,2EACA,UAEA,SA1BA,WA4BA,oCACA,wEACA,UAEA,wBAhCA,WAiCA,8CAEA,YAGA,SACA,eADA,WACA,wEACA,gCACA,yBACA,yBACA,gBAEA,IACA,uDACA,8BACA,8BACA,+BACA,oBAGA,gCACA,wCAGA,gCACA,0BACA,gCACA,OACA,eACA,0CAEA,SACA,oDAEA,gBAEA,qCACA,kBACA,gCACA,iCAEA,IACA,oCACA,kCAQA,QA/GA,WAgHA,yBCvMmV,I,wBCQ/UC,EAAY,eACd,EACAhB,EACAe,GACA,EACA,KACA,KACA,MAIa,aAAAC,E","file":"assets/js/LoginView.34a9743e.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginView.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginView.vue?vue&type=style&index=0&lang=less&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('MhRouterView',{staticClass:\"LoginView view hSpace hSpace--app\",attrs:{\"isContentReady\":_vm.isContentReady}},[_c('div',{staticClass:\"LoginView__inner view__inner\"},[_c('div',{staticClass:\"LoginView__form\"},[_c('KnFormHeaderRow',{attrs:{\"title\":'Login'}}),_c('KnFormFieldRow',[_c('div',{staticClass:\"richText\",staticStyle:{\"grid-column\":\"span 12\"}},[_c('p',[_vm._v(\" Before you can add a new record it's needed to login with your GeoServer Account at \"),_c('a',{attrs:{\"href\":\"https://geoserver.dainst.org/\"}},[_vm._v(\"https://geoserver.dainst.org/\")])]),_c('p',[_vm._v(\" If you do not have an account yet please follow the link to register. \")])])]),_c('KnFormFieldRow',[_c('div',{staticStyle:{\"grid-column\":\"span 12\",\"display\":\"flex\",\"justify-content\":\"flex-end\"}},[_c('div',[_c('br'),_c('BaseButton',{staticClass:\"font font--sizeLarge font--bold\",attrs:{\"tag\":'a',\"href\":_vm.registerUrl,\"isOutlined\":true,\"isDisabled\":false}},[_c('template',{slot:\"before\"}),_c('template',{slot:\"default\"},[_vm._v(\"Register\")])],2),_c('BaseButton',{staticClass:\"font font--sizeLarge font--bold\",attrs:{\"tag\":'a',\"href\":_vm.loginUrl,\"isOutlined\":false,\"isDisabled\":false}},[_c('template',{slot:\"before\"}),_c('template',{slot:\"default\"},[_vm._v(\"Login\")]),_c('template',{slot:\"after\"},[_c('MhIcon',{attrs:{\"type\":\"arrow-right\"}})],1)],2),_c('br'),_c('br')],1)])])],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<MhRouterView class=\"LoginView view hSpace hSpace--app\" :isContentReady=\"isContentReady\">\n\n\t\t<div class=\"LoginView__inner view__inner\">\n\n\t\t\t<div class=\"LoginView__form\">\n\t\t\t\t<!-- headline -->\n\t\t\t\t<KnFormHeaderRow\n\t\t\t\t\t:title=\"'Login'\"\n\t\t\t\t></KnFormHeaderRow>\n\t\t\t\t<!-- text -->\n\t\t\t\t<KnFormFieldRow>\n\t\t\t\t\t<div class=\"richText\" style=\"grid-column: span 12;\">\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\tBefore you can add a new record it's needed to login with your\n\t\t\t\t\t\t\tGeoServer Account at <a href=\"https://geoserver.dainst.org/\">https://geoserver.dainst.org/</a>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\tIf you do not have an account yet please follow the link to register.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</KnFormFieldRow>\n\t\t\t\t<!-- buttons -->\n\t\t\t\t<KnFormFieldRow>\n\t\t\t\t\t<div style=\"grid-column: span 12; display: flex; justify-content: flex-end;\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<BaseButton\n\t\t\t\t\t\t\t\tclass=\"font font--sizeLarge font--bold\"\n\t\t\t\t\t\t\t\t:tag=\"'a'\"\n\t\t\t\t\t\t\t\t:href=\"registerUrl\"\n\t\t\t\t\t\t\t\t:isOutlined=\"true\"\n\t\t\t\t\t\t\t\t:isDisabled=\"false\">\n\t\t\t\t\t\t\t\t<template slot=\"before\"></template>\n\t\t\t\t\t\t\t\t<template slot=\"default\">Register</template>\n\t\t\t\t\t\t\t\t<!--\n\t\t\t\t\t\t\t\t<template slot=\"after\">\n\t\t\t\t\t\t\t\t\t<MhIcon type=\"arrow-right\" ></MhIcon>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t-->\n\t\t\t\t\t\t\t</BaseButton>\n\t\t\t\t\t\t\t<BaseButton\n\t\t\t\t\t\t\t\tclass=\"font font--sizeLarge font--bold\"\n\t\t\t\t\t\t\t\t:tag=\"'a'\"\n\t\t\t\t\t\t\t\t:href=\"loginUrl\"\n\t\t\t\t\t\t\t\t:isOutlined=\"false\"\n\t\t\t\t\t\t\t\t:isDisabled=\"false\">\n\t\t\t\t\t\t\t\t<template slot=\"before\"></template>\n\t\t\t\t\t\t\t\t<template slot=\"default\">Login</template>\n\t\t\t\t\t\t\t\t<template slot=\"after\">\n\t\t\t\t\t\t\t\t\t<MhIcon type=\"arrow-right\" ></MhIcon>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<!--\n\t\t\t\t\t\t\t\t-->\n\t\t\t\t\t\t\t</BaseButton>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t\t<br/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</KnFormFieldRow>\n\t\t\t</div>\n\t\t\t<!--\n\t\t\t<pre name=\"locationHrefWithoutQuery\">{{locationHrefWithoutQuery}}</pre>\n\t\t\t<pre name=\"currentEnv\">{{currentEnv}}</pre>\n\t\t\t<pre name=\"registerUrl\">{{registerUrl}}</pre>\n\t\t\t<pre name=\"loginUrl\">{{loginUrl}}</pre>\n\t\t\t<pre name=\"isReturnRequestTokenUri\">{{isReturnRequestTokenUri}}</pre>\n\t\t\t<pre name=\"requestToken\">{{requestToken}}</pre>\n\t\t\t<pre name=\"accessToken\">{{accessToken}}</pre>\n\t\t\t-->\n\n\t\t</div>\n\n\t</MhRouterView>\n</template>\n\n<script>\n\t// @ is an alias to /src\n\timport EventBus from '@/helper/EventBus.js'\n\timport { mapGetters } from 'vuex'\n\timport RestHandler from '@/components/RestHandler/RestHandler.js'\n\timport MhRouterView from '@/components/MhRouterView/v2/MhRouterView.vue'\n\timport KnFormHeaderRow from '@/molecules/KnFormHeaderRow.vue'\n\timport KnFormFieldRow from '@/molecules/KnFormFieldRow.vue'\n\timport BaseButton from '/Users/Mario/Dropbox/htdocs/2020-09-17__MhForm/vue-cli-dev/src/components/MhForm/v4/BaseButton.vue'\n\timport MhIcon from '/Users/Mario/Dropbox/htdocs/2019-05-20__wp-kickstart-vue/wordpress/wp-content/themes/wp-kickstart-v3-theme/vue-cli-dev/src/components/MhIcon/v2/MhIcon.vue'\n\n\texport default {\n\t\tname: 'LoginView',\n\t\tcomponents: {\n\t\t\tMhRouterView,\n\t\t\tKnFormHeaderRow,\n\t\t\tKnFormFieldRow,\n\t\t\tBaseButton,\n\t\t\tMhIcon,\n\t\t},\n\t\tmixins: [ RestHandler ],\n\t\tdirectives: {},\n\t\tprops: {},\n\t\tdata(){\n\t\t\treturn {\n\t\t\t\tisContentReady: false,\n                posts: undefined,\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tisReturnRequestTokenUri: {\n\t\t\t\thandler: function( to, from ) {\n\t\t\t\t\tif( to ) this.fetchAuthToken()\n\t\t\t\t},\n\t\t\t\timmediate : true,\n\t\t\t\tdeep: true,\n\t\t\t},\n\t\t},\n\t\tcomputed: {\n\t\t\tapp(){\n\t\t\t\treturn this.$root.$children[0]\n\t\t\t},\n\t\t\telmClasses(){\n\t\t\t\tlet classes = []\n\n\t\t\t\t//classes.push('new_class')\n\n\t\t\t\treturn classes\n\t\t\t},\n\t\t\t...mapGetters([\n\t\t\t\t'currentEnv',\n\t\t\t\t'requestToken',\n\t\t\t\t'accessToken',\n    \t\t]),\n\t\t\tlocationHrefWithoutQuery(){\n\t\t\t\tconst location = window.location\n\n\t\t\t\treturn location.protocol + '//' + location.host + location.pathname + location.hash\n\t\t\t},\n\t\t\tregisterUrl(){\n\t\t\t\tconst redirectUri = this.locationHrefWithoutQuery\n\t\t\t\tconst uri = this._.get( this.currentEnv, 'registerUrl', '' ).replace('%redirect_uri%', redirectUri)\n\t\t\t\treturn uri\n\t\t\t},\n\t\t\tloginUrl(){\n\t\t\t\t//const redirectUri = encodeURI( this.locationHrefWithoutQuery )\n\t\t\t\tconst redirectUri = this.locationHrefWithoutQuery\n\t\t\t\tconst uri = this._.get( this.currentEnv, 'loginUrl', '' ).replace('%redirect_uri%', redirectUri)\n\t\t\t\treturn uri\n\t\t\t},\n\t\t\tisReturnRequestTokenUri(){ // wenn der request-token vom server nach dem login zurückkommt\n\t\t\t\tconst hasCodeQuery = this._.has( this.$route.query, 'code', false )\n\n\t\t\t\treturn hasCodeQuery\n\t\t\t},\n\t\t},\n\t\tmethods: {\n\t\t\tfetchAuthToken( doLog = true ){ // nachdem der requestToken erhalten wurde, wird hier nach dem Auth-Token gefragt\n\t\t\t\tconst redirectUri = this.locationHrefWithoutQuery\n\t\t\t\tconst queryString = window.location.search\n\t\t\t\tconst urlParams = new URLSearchParams(queryString)\n\t\t\t\tconst requestToken = urlParams.get('code')\n\n\t\t\t\tif( doLog ){\n\t\t\t\t\tconsole.group( this.$options.name, '• fetchAuthToken()')\n\t\t\t\t\tconsole.log('redirectUri:', redirectUri)\n\t\t\t\t\tconsole.log('queryString:', queryString)\n\t\t\t\t\tconsole.log('requestToken:', requestToken)\n\t\t\t\t\tconsole.groupEnd()\n\t\t\t\t}\n\n\t\t\t\tthis.$router.replace('/login/')\n\t\t\t\tthis.$store.commit('setRequestToken', requestToken)\n\n\t\t\t\t//let res = fetch(\"https://dai-gn-test.csgis.de/o/token/\", {\n\t\t\t\tlet res = fetch( this.currentEnv.tokenUrl, {\n\t\t\t\t\tbody: new URLSearchParams({\n\t\t\t\t\tgrant_type: 'authorization_code',\n\t\t\t\t\tcode: requestToken,\n\t\t\t\t\tredirect_uri: redirectUri,\n\t\t\t\t\tclient_id: this.currentEnv.tokenClientId,\n\t\t\t\t}),\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"application/x-www-form-urlencoded\"\n\t\t\t\t},\n\t\t\t\t\tmethod: \"POST\"\n\t\t\t\t})\n\t\t\t\t.then( response => response.json() )\n\t\t\t\t.then( data => {\n\t\t\t\t\tconst accessToken = this._.get( data, 'access_token')\n\t\t\t\t\tconsole.log('fetchAuthToken:', data )\n\n\t\t\t\t\tif( accessToken ){\n\t\t\t\t\t\tthis.$store.commit('setAccessToken', accessToken )\n\t\t\t\t\t\tthis.$router.replace('/edit/')\n\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t/*\n\t\t\t\t*/\n\t\t\t},\n\t\t},\n\t\tmounted() {\n\t\t\tthis.isContentReady = true\n\t\t},\n\t}\n</script>\n\n<style lang=\"less\">\n\t@import (reference) \"@/less/vars.less\";\n\t@import (reference) \"@/less/mixins.less\";\n\t@import (reference) \"@/less/atoms.less\";\n\n    .LoginView { // debug\n        [showBorders2] & {}\n    }\n    .LoginView { // layout\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\n\t\t&__form {\n\t\t\tmax-width: 650px;\n\t\t}\n    }\n    .LoginView { // styling\n\t\t.BaseButton + .BaseButton {\n\t\t\tmargin-left: 0.5em;\n\t\t}\n    }\n\n\t@media @mq[xs] {}\n\t@media @mq[sm] {}\n\t@media @mq[md] {}\n\t@media @mq[dt] {}\n\t@media @mq[lg] {}\n\t@media @mq[xl] {}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoginView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LoginView.vue?vue&type=template&id=7cc6590e&\"\nimport script from \"./LoginView.vue?vue&type=script&lang=js&\"\nexport * from \"./LoginView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LoginView.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}